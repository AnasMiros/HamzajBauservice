(()=>{"use strict";const n=window.wp.i18n;function e(n){n.classList.add("button-disabled","noclick")}function t(n){return window.parent.wpScan?.find((e=>e.slug===n))?.severity}function i(e,t,i,o){if(!["none","medium","high","unknown"].includes(e)||!["scanned","installed","active","updatable"].includes(t))return;if(!("installed"!==t&&"active"!==t||"unknown"!==e&&"none"!==e))return;const s={none:(0,n.__)("The vulnerability scan did not find any issues.","ionos-security"),unknown:(0,n.__)("The vulnerability scan did not produce any results.","ionos-security"),medium:(0,n.__)("The vulnerability scan has found issues.","ionos-security"),high:(0,n.__)("The vulnerability scan has found critical issues.","ionos-security")},a={unknown:{installed:(0,n.__)("Activation is not recommended.","ionos-security"),scanned:(0,n.__)("Installation is not recommended.","ionos-security")},medium:{installed:(0,n.__)("Activation is not recommended.","ionos-security"),scanned:(0,n.__)("Installation is not recommended.","ionos-security")},high:{installed:(0,n.__)("Activation is not possible.","ionos-security"),scanned:(0,n.__)("Installation is not possible.","ionos-security")}},c=a[e]?.[t],l="scanned"!==t&&`<a href="${adminUrl}" target="_parent">${(0,n.__)("More information.","ionos-security")}</a>`,r=[s[e],c,l].filter((n=>n)).join(" "),u=document.createElement("div");i.insertBefore(u,o?i.querySelector(o):i.firstChild),u.outerHTML=`<div class="notice notice-alt ${{none:"notice-success",unknown:"notice-warning",medium:"notice-warning",high:"notice-error"}[e]} inline"><p>${r}</p></div>`}function o(n){return n.disabled||n.classList.contains("disabled")?"active":n.classList.contains("activate")||n.classList.contains("activate-now")?"installed":n.classList.contains("update-now")?"updatable":"scanned"}function s(t){const s=t.target;if(s.dataset.alreadyClicked)return;if(t.preventDefault(),t.stopPropagation(),s.disabled)return;s.dataset.alreadyClicked=!0;const a=s.textContent;s.textContent=(0,n.__)("Checking â€¦","ionos-security"),s.classList.add("updating-message");const c=s.dataset.slug;wp.ajax.send("scan-plugin",{type:"GET",data:{slug:c,_ajax_nonce:wp.updates.ajaxNonce}}).then((n=>{const t=n.severity;window.parent.wpScan.push({slug:c,severity:t}),i(t,o(s),l?document.querySelector("#section-holder"):document.querySelector(".plugin-card-"+c)),r&&i(t,o(s),window.parent.document.querySelector(".plugin-card-"+c)),s.classList.remove("updating-message"),s.textContent=a,"none"===t?wp.updates.installPlugin({slug:c}):"high"===t&&(e(s),r&&e(window.parent.document.querySelector(".plugin-card-"+c+" .install-now.button")))}))}function a(n){n.addEventListener("click",(n=>{n.target.matches?.("a.button.install-now")&&s(n)}));for(const s of n.querySelectorAll(".plugin-card")){const n=[...s.classList].find((n=>n.startsWith("plugin-card-"))).replace(/plugin-card-/,""),a=t(n);if(a){const t=s.querySelector(".plugin-action-buttons .button");i(a,o(t),s),t.dataset.alreadyClicked=!0,"high"===a&&(e(t),r&&e(window.parent.document.querySelector(".plugin-card-"+n+" .install-now.button")))}}}const c=new URLSearchParams(window.location.search),l="plugin-information"===c.get("tab"),r=window.parent!==window;if(l){const n=t(c.get("plugin"));n?(i(n,o(document.querySelector("#plugin-information-footer .button")),document.querySelector("#section-holder")),"high"===n&&e(document.querySelector("#plugin_install_from_iframe"))):document.querySelector("#plugin_install_from_iframe")?.addEventListener("click",s)}else a(document.querySelector(".wp-list-table.plugin-install")),new MutationObserver((n=>{for(const e of n)if("childList"===e.type)for(const n of e.addedNodes)n.matches?.(".wp-list-table.plugin-install")&&a(n)})).observe(document.querySelector("#plugin-filter"),{childList:!0})})();